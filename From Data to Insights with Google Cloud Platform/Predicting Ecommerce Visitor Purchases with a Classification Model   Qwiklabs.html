<!DOCTYPE html>
<html lang='en'>
<head>
<script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"caff0d62ed","applicationID":"29451451","transactionName":"IQ1XRUEOVV1dFxlRXAEXSlRATkpZVxI=","queueTime":0,"applicationTime":176,"agent":""}</script>
<script>window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(3),u=e(4),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],t),e}finally{f.emit("fn-end",[c.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){if(!o)return!1;if(e!==o)return!1;if(!n)return!0;if(!i)return!1;for(var t=i.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var o=null,i=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var u=navigator.userAgent,f=u.match(a);f&&u.indexOf("Chrome")===-1&&u.indexOf("Chromium")===-1&&(o="Safari",i=f[1])}n.exports={agent:o,version:i,match:r}},{}],3:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],4:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],5:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=v(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||o(t)}function w(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:l,addEventListener:l,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(3),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!E++){var e=x.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+x.offset],null,"api");var t=l.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===l.readyState&&i()}function i(){f("mark",["domContent",a()+x.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-x.offset}var u=(new Date).getTime(),f=e("handle"),c=e(3),s=e("ee"),p=e(2),d=window,l=d.document,m="addEventListener",v="attachEvent",g=d.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:g,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1123.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),x=n.exports={offset:u,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),l[m]?(l[m]("DOMContentLoaded",i,!1),d[m]("load",r,!1)):(l[v]("onreadystatechange",o),d[v]("onload",r)),f("mark",["firstbyte",u],null,"api");var E=0,O=e(5)},{}]},{},["loader"]);</script>
<script src="https://cdn.qwiklabs.com/assets/error_reporting-eab3108e7c027a9f2c80f632ccd1f6e48c6075dfb8330451ddf84893b14a1825.js"></script>
<meta content='[]' name='active-experiments'>
<meta content='{&quot;userId&quot;:1340194}' name='help-api-product-data'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="bhX5g8D2kIzRl7K4+myZ08+Ac+m06sTi2pkFTMJsGYkUwSJYudppxKqsRycz1OY57rgt/p1OYQw6EcKd7JZhMg==" />
<title>Predicting Ecommerce Visitor Purchases with a Classification Model | Qwiklabs</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0' name='viewport'>
<meta content='Predict whether or not a visitor will return to your ecommerce site and purchase. ' name='description'>
<meta content='Qwiklabs' name='author'>
<meta property="og:url" content="https://www.qwiklabs.com/focuses/17164" /><link href="https://www.qwiklabs.com/focuses/17164" rel="canonical" />
<meta content='1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0' name='google-site-verification'>
<meta content='Predicting Ecommerce Visitor Purchases with a Classification Model | Qwiklabs' property='og:title'>
<meta content='website' property='og:type'>
<meta content='/favicon-144.png' property='og:image'>
<meta content='Qwiklabs' property='og:site_name'>
<meta content='Predict whether or not a visitor will return to your ecommerce site and purchase. ' property='og:description'>
<meta content='/qwiklabs_logo_900x887.png' property='og:logo' size='900x887'>
<meta content='/qwiklabs_logo_994x187.png' property='og:logo' size='994x187'>
<meta content='#3681E4' property='msapplication-TileColor'>
<meta content='/favicon-144.png' property='msapplication-TileImage'>
<link href='/favicon-32.png' rel='shortcut icon'>
<link color='#3681E4' href='/favicon-svg.svg' rel='mask-icon'>
<link href='/favicon-180.png' rel='apple-touch-icon-precomposed'>
<link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Oswald:400|Roboto+Mono:400,700|Roboto:300,400,500,700|Google+Sans:300,400,500,700|Google+Sans+Display:400|Material+Icons" />


<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script>
//<![CDATA[
window.gon={};gon.current_user={"firstname":"Bogdan","lastname":"Gavrylov","fullname":"Bogdan Gavrylov","company":"Coursera","email":"bogdana278@gmail.com","origin":"googlecoursera-run, lti-coursera","subscriptions":0,"id":"7403ae9e3e30a2949db1c62f50965cc5","qlCreatedAt":"2018-12-29 19:17:55 UTC","optIn":null};gon.segment="j4Im8pqIko0Lxq4wVVZWMPMM0EroHUvb";gon.deployment="googlecoursera-run";
//]]>
</script>
<script type='application/ld+json'>
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.qwiklabs.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.qwiklabs.com/catalog?keywords={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>



<link rel="stylesheet" media="all" href="https://cdn.qwiklabs.com/assets/application-92d58a9a5df4407f208006539ecbffe9f7873eb7c1c40ae12cd9745af923abc7.css" />
<script>
  EVENT_SOURCE_BASE_URL = "https://googlecoursera-run.qwiklabs.com/nchan-sub?id=";
</script>
<script src="https://cdn.qwiklabs.com/polyfills/webcomponents-loader.js"></script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/hallofmirrors-3acde9ad9287d8ce9d1e78731ceed2e628ba0534a0c1094b4e1cbac09a6a6114.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script src="https://cdn.qwiklabs.com/assets/vendor-6de3ede8df1048f09413b5f8f2bbc2ab451ddfee2e5f7b5791e46671f41b8019.js"></script>
<script src="https://cdn.qwiklabs.com/assets/application-4f043533e70f69106ace797ca64673252233c460bf6cc27cdf677e0b3a8cbb46.js"></script>
<script>
  var errorHandler = new StackdriverErrorReporter();
  errorHandler.start({
    key: 'AIzaSyCkrYBqwUuCqHbHVq02MVHfoXq80yws4eg',
    projectId: 'qwiklabs-website-prod'
  })
</script>
</head>
<body class='is-open focuses focuses-show lab-show l-full no-nav '>
<div class='header-container'>
<div class='header'>
<a class='mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect header__button header__button--nav header__side-menu-button js-side-menu-button'>
<i class='material-icons'>menu</i>
</a>
<div class='header__title'>
<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect header__button header__button--nav" href="https://www.coursera.org/learn/data-insights-gcp-apply-ml/gradedLti/Rb8Gs/predicting-visitor-return-purchases-with-bigquery"><i class="material-icons">arrow_back</i></a>

<h1 class='headline-5'>
Predicting Ecommerce Visitor Purchases with a Classification Model
</h1>
</div>
<div class='header__actions'>
<a class='mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect header__button header__button--action header__button--search js-header-search-bar-button'>
<i class='material-icons'>search</i>
</a>

<ql-help context="lab" productdata="{&quot;userId&quot;:1340194}"></ql-help>
<a class='header-my-account-button mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect js-my-account-button'>
<img class="avatar " src="https://secure.gravatar.com/avatar/ba2135b74f7b9a4b27a29091137d70b4.png?s=80&amp;d=mm" />
</a>
<div class='header-my-account-menu js-my-account-menu'>
<div class='card elevation-2 no-padding'>
<div class='my-account-menu__top'>
<img class="avatar " src="https://secure.gravatar.com/avatar/ba2135b74f7b9a4b27a29091137d70b4.png?s=80&amp;d=mm" />
<div class='my-account-menu__info'>
<h4 class='subtitle-headline-1'>
Bogdan Gavrylov
</h4>
<p class='body-2 text--gray'>
<span>bogdana278@gmail.com</span>
</p>
<a class="button" href="/my_account/profile">My Account</a>
</div>
</div>
<div class='my-account-menu__bottom'>
<a class="text--green subtitle-headline-2" href="/my_account/credits">30 Credits
</a><a class="button button--hairline" rel="nofollow" data-method="delete" href="/users/sign_out">Sign out</a>
</div>
</div>
</div>

</div>
</div>
</div>
<div class='header__search-bar js-header-search-bar'>
<form id="catalog-search-mobile" onsubmit="ql.catalogSearchFilter(); return false;" action="/searches/elasticsearch" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="gbwYOampgZc2cIk6XAj3+8KDuXspwNYmanBaua5M4kL7aMPi0IV4301LfKWVsIgR47vnbABkc8iK+J1ogLaa+Q==" />
<input type="text" name="keywords" id="keywords" placeholder="Search" />
</form>

<a class='mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect header__button'>
<i class='material-icons'>close</i>
</a>
</div>

<nav class='is-open js-side-menu side-menu'>
<div class='side-menu__inner' style='min-height: 346px;'>
<nav class='side-menu__nav'>
<a title="Home" class="side-menu__item js-navigation-button" href="/"><div class='side-menu__item__icon'>
<ql-icon>home</ql-icon>
</div>
<div class='side-menu__item__label'>
Home
</div>
</a>
<a title="Catalog" class="side-menu__item js-navigation-button" href="/catalog"><div class='side-menu__item__icon'>
<ql-icon>school</ql-icon>
</div>
<div class='side-menu__item__label'>
Catalog
</div>
</a>
<a title="My Learning" class="side-menu__item js-navigation-button" href="/my_learning"><div class='side-menu__item__icon'>
<ql-icon>event_note</ql-icon>
</div>
<div class='side-menu__item__label'>
My Learning
</div>
</a>
</nav>
<div class='side-menu__small-links js-small-links'>
<a href="/privacy_policy">Privacy</a>
<a href="/terms_of_service">Terms of Service</a>
</div>
</div>
</nav>

<main class='js-main'>
<span class='hidden' id='flash-sibling-before'></span>

<div class='l-main-wrapper'>







<div class='js-lab-state' data-analytics-payload='{&quot;label&quot;:&quot;Predicting Ecommerce Visitor Purchases with a Classification Model&quot;,&quot;lab_name&quot;:&quot;Predicting Ecommerce Visitor Purchases with a Classification Model&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecoursera-run&quot;}' data-focus-id='17164' data-lab-billing-limit='0.0' data-lab-duration='8100' data-parent='classroom'></div>
<ql-new-lab-control-panel class='js-lab-control-panel l-lab-control-panel' connectionDetails='[]' connectionFiles='[]' labControlButton='{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}' labTimer='{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:8100,&quot;seconds_remaining&quot;:8100}' studentResources='[]'></ql-new-lab-control-panel>

<div class='l-lab-main-body'>
<div class='js-lab-content lab-content'>
<div class='alert alert--fake js-alert'>
<p class='alert__message js-alert-message'></p>
<a class='alert__close js-alert-close'>
<i class='fa fa-times'></i>
</a>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='lab-content__markdown-wrapper'>
<div class='lab-preamble'>
<h1 class='lab-preamble__title'>
Predicting Ecommerce Visitor Purchases with a Classification Model
</h1>
<div class='lab-preamble__details subtitle-headline-1'>
<span>2 hours 15 minutes</span>
<span>Free</span>
<div class='lab__rating'>
<a href="/focuses/17164/reviews?parent=catalog"><div class='rateit' data-rateit-readonly='true' data-rateit-value='4.3992'></div>

</a><a data-target='#lab-review-modal' data-toggle='modal'>
Rate Lab
</a>
</div>
</div>
</div>

<div class='lab-content__inner-wrapper'>
<div class='js-markdown-instructions lab-content__markdown markdown-lab-instructions' id='markdown-lab-instructions'>
<div class="codelab">
  
  
  <div class="lab-step">
    <h2 id="step1">Overview</h2>
    
    <p>BigQuery is Google's fully managed, NoOps, low cost analytics database. With BigQuery you can query terabytes and terabytes of data without having any infrastructure to manage or needing a database administrator. BigQuery uses SQL and can take advantage of the pay-as-you-go model. BigQuery allows you to focus on analyzing data to find meaningful insights.</p>
<p>BigQuery Machine Learning (BQML, product in beta) is a new feature in BigQuery where data analysts can create, train, evaluate, and predict with machine learning models with minimal coding.</p>
<p>There is a newly available <a href="https://www.en.advertisercommunity.com/t5/Articles/Introducing-the-Google-Analytics-Sample-Dataset-for-BigQuery/ba-p/1676331#" target="_blank">ecommerce dataset</a> that has millions of Google Analytics records for the <a href="https://shop.googlemerchandisestore.com/" target="_blank">Google Merchandise Store</a> loaded into BigQuery. In this lab you will use this data to run some typical queries that businesses would want to know about their customers' purchasing habits.</p>
<h3>Objectives</h3>
<p>In this lab, you learn to perform the following tasks:</p>
<ul>
<li>Use BigQuery to find public datasets</li>
<li>Query and explore the ecommerce dataset</li>
<li>Create a training and evaluation dataset to be used for batch prediction</li>
<li>Create a classification (logistic regression) model in BQML</li>
<li>Evaluate the performance of your machine learning model</li>
<li>Predict and rank the probability that a visitor will make a purchase </li>
</ul>
<h3>What you'll need</h3>
<ul>
<li>A Google Cloud Platform Project</li>
<li>A Browser, such as Google <a href="https://www.google.com/chrome/browser/desktop/" target="_blank">Chrome</a> or Mozilla <a href="https://www.mozilla.org/firefox/" target="_blank">Firefox</a>
</li>
</ul>


  </div>
  
  <div class="lab-step">
    <h2 id="step2">Set up your environment</h2>
    
    <h4>What you'll need</h4>
<p>To complete this lab, you'll need:</p>
<ul>
<li>Access to a standard internet browser (Chrome browser recommended).</li>
<li>Time. Note the lab's <strong>Completion</strong> time in Qwiklabs, which is an estimate of the time it should take to complete all steps.  Plan your schedule so you have time to complete the lab. Once you start the lab, you will not be able to pause and return later (you begin at step 1 every time you start a lab). </li>
<li>You do NOT need a Google Cloud Platform account or project. An account, project and associated resources are provided to you as part of this lab.</li>
<li>If you already have your own GCP account, make sure you do not use it for this lab. </li>
<li>If your lab prompts you to log into the console, <strong>use only the student account provided to you by the lab</strong>. This prevents you from incurring charges for lab activities in your personal GCP account.</li>
</ul>
<aside class="warning"><p>Use a new Incognito window (Chrome) or another browser for the Qwiklabs session. Alternatively, you can log out of all other Google / Gmail accounts before beginning the labs.</p>
<p><img style="max-width: 165.50px;" src="https://cdn.qwiklabs.com/H9grNbpC9l1yGuXlFZWHuyGewkU9EH%2B6adyLodUFMts%3D"></p>
</aside>
<h4>Start your lab</h4>
<p>When you are ready, click <strong>Start Lab</strong>. You can track your lab's progress with the status bar at the top of your screen. </p>
<p><img style="max-width: 355.50px;" src="https://cdn.qwiklabs.com/5hZQ%2F5rENfAecH3R%2F77eXHj0RNv44zrl38uDlrFMX5g%3D"></p>
<aside class="warning"><p><strong>Important</strong>:  What is happening during this time?</p>
<p>Your lab is spinning up GCP resources for you behind the scenes, including an account, a project, resources within the project, and permission for you to control the resources you will need to run the lab. This means that instead of spending time manually setting up a project and building resources from scratch as part of your lab, you can begin learning more quickly.</p>
</aside>
<h4>Find Your Lab's GCP Username and Password</h4>
<p>To access the resources and console for this lab, locate the Connection Details panel in Qwiklabs.  Here you will find the account ID and password for the account you will use to log in to the Google Cloud Platform:</p>
<p><img style="max-width: 310.00px;" src="https://cdn.qwiklabs.com/Xq7gN%2BbO2%2FSfanAquKnvggu45xczKUb%2FdqCDGmOWqvw%3D"></p>
<p>If your lab provides other resource identifiers or connection-related information, it will appear on this panel as well.</p>

<h4>Sign in to Google Cloud Console</h4>
<ol start="1">
<li>In the Qwiklabs browser tab/window (preferably in Incognito mode <img style="max-width: 26.14px;" src="https://cdn.qwiklabs.com/H9grNbpC9l1yGuXlFZWHuyGewkU9EH%2B6adyLodUFMts%3D">) or in the separate browser you are using for the Qwiklabs session, copy the <strong>Username</strong> from the <strong>Connection Details</strong> panel and click <strong>Open Google Console</strong>.</li>
</ol>
<p><img style="max-width: 320.00px;" src="https://cdn.qwiklabs.com/Jx7t5dq0bFwKaDX%2F41U1dWyz6PfYplSy2vE90ujpn2Y%3D"></p>
<ol start="2">
<li>Paste your Qwiklab username in the <strong>Enter your email</strong> field then click <strong>Next</strong>:</li>
</ol>
<p><img style="max-width: 328.50px;" src="https://cdn.qwiklabs.com/rP81bHN99Vr7kaKU7fqy2IuSj1rjjNXkD1iunRSBWBw%3D"></p>
<ol start="2">
<li>Copy-paste your Qwiklab password in the <strong>Enter your password</strong> field then click <strong>Next</strong>.</li>
</ol>
<p><img style="max-width: 337.51px;" src="https://cdn.qwiklabs.com/X%2FtlIocpakInwVEI2pZ7q%2F1tF2tG0EMx4jTW0TTx4LM%3D"></p>
<ol start="3">
<li>If the <strong>Protect your account</strong> panel appears, click <strong>Done</strong>.<img style="max-width: 294.50px;" src="https://cdn.qwiklabs.com/%2BxwObHELBwxjsWTw1PVzEHRTFwrx4HhSeCqYieipgP4%3D">
</li>
<li>If the <strong>Welcome to your new account</strong> panel appears, click <strong>Accept</strong>.<img style="max-width: 488.50px;" src="https://cdn.qwiklabs.com/6gNDM7ij28lB37NMow0WAAbF2SXrRDS3RqgE0R6BS%2Fk%3D">
</li>
<li>If the Email preferences  and Terms of Service panel appears, select <strong>No</strong>, <strong>Yes</strong>, and click <strong>Accept and Continue</strong>.<img style="max-width: 510.00px;" src="https://cdn.qwiklabs.com/x92hUkW%2B9pPmhKzn3KHetbfdBeL3Bwy4bOwrL8aGCL4%3D">
</li>
<li>In the console, click <strong>Select a project</strong> then click on your <strong>qwiklabs-gcp-*****</strong> project:<img style="max-width: 624.00px;" src="https://cdn.qwiklabs.com/ciz%2Fqi03yWoV%2BNy0%2BFw0j5%2FyJEWY1PtOyVI%2FUxwYNTE%3D">
</li>
</ol>

<p>[[<strong>import </strong><a href="https://docs.google.com/document/d/1JVTwEO_gN_IvBEbvwCHnH8rOrHnt_x326KwgWGSe-9M/edit" target="_blank">bigquery</a>-open]]</p>
<h3>Access the course dataset</h3>
<p>Ensure your BigQuery project is set to your Qwiklabs project (qwiklabs-gcp-123abc) and not Qwiklabs Resources. If you need to switch between projects, click the drop down arrow next to the project and <strong>Switch to project</strong>, then select your project as shown below:</p>
<p><img style="max-width: 624.00px;" src="https://cdn.qwiklabs.com/BAvkO3EV6EJfur5ExHqvF28d8rsR9LUdr7VXlPiZl74%3D"></p>
<p>Once BigQuery is open, click on the below direct link to bring the public <strong>data-to-insights</strong> project into your BigQuery projects panel:</p>
<ul>
<li><a href="https://bigquery.cloud.google.com/table/data-to-insights:ecommerce.web_analytics" target="_blank">https://bigquery.cloud.google.com/table/data-to-insights:ecommerce.web_analytics</a></li>
</ul>
<p>The field definitions for the <strong>data-to-insights</strong> ecommerce dataset are <a href="https://support.google.com/analytics/answer/3437719?hl=en" target="_blank">here</a>. Keep the link open in a new tab for reference.</p>


  </div>
  
  <div class="lab-step">
    <h2 id="step3">Explore ecommerce data</h2>
    
    <p><strong>Scenario:</strong> Your data analyst team exported the Google Analytics logs for an ecommerce website into BigQuery and created a new table of all the raw ecommerce visitor session data for you to explore. Using this data, you'll try to answer a few questions.</p>
<p><strong>Question:</strong> Out of the total visitors who visited our website, what % made a purchase?</p>
<p>Click the <strong>Compose Query</strong> button and add the following to the New Query field:</p>
<pre class="prettyprint"><code>#standardSQL&#x000A;WITH visitors AS(&#x000A;SELECT &#x000A;COUNT(DISTINCT fullVisitorId) AS total_visitors&#x000A;FROM `data-to-insights.ecommerce.web_analytics`&#x000A;),&#x000A;&#x000A;purchasers AS(&#x000A;SELECT &#x000A;COUNT(DISTINCT fullVisitorId) AS total_purchasers&#x000A;FROM `data-to-insights.ecommerce.web_analytics`&#x000A;WHERE totals.transactions IS NOT NULL&#x000A;)&#x000A;&#x000A;SELECT &#x000A;  total_visitors, &#x000A;  total_purchasers, &#x000A;  total_purchasers / total_visitors AS conversion_rate&#x000A;FROM visitors, purchasers</code></pre>
<p>Then click <strong>Run Query</strong>. </p>
<p>The result: 2.69%</p>
<p><strong>Question:</strong> What are the top 5 selling products? </p>
<p>Replace the previous query with the following, and then <strong>Run Query</strong>:</p>
<pre class="prettyprint"><code>#standardSQL&#x000A;SELECT &#x000A;  p.v2ProductName,&#x000A;  p.v2ProductCategory,&#x000A;  SUM(p.productQuantity) AS units_sold,&#x000A;  ROUND(SUM(p.localProductRevenue/1000000),2) AS revenue&#x000A;FROM `data-to-insights.ecommerce.web_analytics`,&#x000A;UNNEST(hits) AS h,&#x000A;UNNEST(h.product) AS p&#x000A;GROUP BY 1, 2&#x000A;ORDER BY revenue DESC&#x000A;LIMIT 5;</code></pre>
<p>The result:</p>
<table>
<tr>
<td colspan="1" rowspan="1">
<p><strong>Row</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>v2ProductName</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>v2ProductCategory</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>units_sold</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>revenue</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest® Learning Thermostat 3rd Gen-USA - Stainless Steel</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>17651</p>
</td>
<td colspan="1" rowspan="1">
<p>870976.95</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>2</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest® Cam Outdoor Security Camera - USA</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>16930</p>
</td>
<td colspan="1" rowspan="1">
<p>684034.55</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>3</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest® Cam Indoor Security Camera - USA</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>14155</p>
</td>
<td colspan="1" rowspan="1">
<p>548104.47</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>4</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest® Protect Smoke + CO White Wired Alarm-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>6394</p>
</td>
<td colspan="1" rowspan="1">
<p>178937.6</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>5</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest® Protect Smoke + CO White Battery Alarm-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>Nest-USA</p>
</td>
<td colspan="1" rowspan="1">
<p>6340</p>
</td>
<td colspan="1" rowspan="1">
<p>178572.4</p>
</td>
</tr>
</table>
<p><strong>Question:</strong> How many visitors bought on subsequent visits to our website?</p>
<p>Run the following query to find out:</p>
<pre class="prettyprint"><code>#standardSQL&#x000A;&#x000A;# visitors who bought on a return visit (could have bought on first as well&#x000A;WITH all_visitor_stats AS (&#x000A;SELECT&#x000A;  fullvisitorid, # 741,721 unique visitors&#x000A;  IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit &#x000A;  FROM `data-to-insights.ecommerce.web_analytics` &#x000A;  GROUP BY fullvisitorid&#x000A;)&#x000A;  &#x000A;SELECT &#x000A;  COUNT(DISTINCT fullvisitorid) AS total_visitors,&#x000A;  will_buy_on_return_visit&#x000A;FROM all_visitor_stats&#x000A;GROUP BY will_buy_on_return_visit</code></pre>
<p>The results:</p>
<table>
<tr>
<td colspan="1" rowspan="1">
<p><strong>Row</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>total_visitors</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>will_buy_on_return_visit</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
<td colspan="1" rowspan="1">
<p>729848</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>2</p>
</td>
<td colspan="1" rowspan="1">
<p>11873</p>
</td>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
</tr>
</table>
<p>Analyzing the results, you can see that (11873 / 729848) = 1.6% of total visitors will return and purchase from the website. This includes the subset of visitors who bought on their very first session and then came back and bought again. </p>
<p><strong>Question:</strong> What are some of the reasons a typical ecommerce customer will browse but not buy until a later visit? </p>
<p><strong>Answer:</strong> Although there is no one right answer, one popular reason is comparison shopping between different ecommerce sites before ultimately making a purchase decision. This is very common for luxury goods where significant upfront research and comparison is required by the customer before deciding (think car purchases) but also true to a lesser extent for the merchandise on our site (t-shirts, accessories etc). </p>
<p>In the world of online marketing, identifying and marketing to these future customers based on the characteristics of their first visit will increase conversion rates and reduce the outflow to competitor sites. </p>


  </div>
  
  <div class="lab-step">
    <h2 id="step4">Identify an objective</h2>
    
    <p>We will now create a Machine Learning model in BigQuery to predict whether or not a new user is likely to purchase in the future. Identifying these high-value users can help your marketing team target them with special promotions and ad campaigns to ensure a conversion while they comparison shop between visits to our ecommerce site. </p>


  </div>
  
  <div class="lab-step">
    <h2 id="step5">Select features and create your training dataset</h2>
    
    <p>Google Analytics captures a wide variety of dimensions and measures about a user's visit on our ecommerce website. Browse the complete list of fields <a href="https://support.google.com/analytics/answer/3437719?hl=en" target="_blank">here</a> and then <a href="https://bigquery.cloud.google.com/table/data-to-insights:ecommerce.web_analytics?tab=preview" target="_blank">preview the demo dataset</a> to find useful features that will help a machine learning model understand the relationship between data about a visitor's first time on our website and whether they will return and make a purchase. </p>
<p>Your team decides to test whether these two fields are good inputs for your classification model:</p>
<ul>
<li>Totals.bounces (whether the visitor left the website immediately)</li>
<li>totals.timeOnSite (how long the visitor was on our website)</li>
</ul>
<p><strong>Question:</strong> What are the risks of only using the above two fields? </p>
<p><strong>Answer:</strong> Machine learning is only as good as the training data that is fed into it. If there isn't enough information for the model to determine and learn the relationship between your input features and your label (in our case, whether the visitor bought in the future) then you will not have an accurate model. While training a model on just these two fields is a start, we will see if they're good enough to produce an accurate model. </p>
<p>Click <strong>Compose Query </strong>and add the following:</p>
<pre class="prettyprint"><code>#standardSQL&#x000A;SELECT&#x000A;  * EXCEPT(fullVisitorId)&#x000A;FROM&#x000A;&#x000A;  # features &#x000A;  (SELECT&#x000A;    fullVisitorId,&#x000A;    IFNULL(totals.bounces, 0) AS bounces,&#x000A;    IFNULL(totals.timeOnSite, 0) AS time_on_site&#x000A;  FROM&#x000A;    `data-to-insights.ecommerce.web_analytics`&#x000A;  WHERE&#x000A;    totals.newVisits = 1)&#x000A;  JOIN&#x000A;  (SELECT&#x000A;    fullvisitorid,&#x000A;    IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit&#x000A;  FROM&#x000A;      `data-to-insights.ecommerce.web_analytics`&#x000A;  GROUP BY fullvisitorid)&#x000A;  USING (fullVisitorId)&#x000A;ORDER BY time_on_site DESC&#x000A;LIMIT 10;</code></pre>
<p>Then <strong>Run Query</strong>.</p>
<p>Results:</p>
<table>
<tr>
<td colspan="1" rowspan="1">
<p><strong>Row</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>bounces</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>time_on_site</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>will_buy_on_return_visit</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>15047</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>2</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>12136</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>3</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>11201</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>4</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>10046</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>5</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>9974</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>6</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>9564</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>7</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>9520</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>8</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>9275</p>
</td>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>9</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>9138</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>10</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
<td colspan="1" rowspan="1">
<p>8872</p>
</td>
<td colspan="1" rowspan="1">
<p>0</p>
</td>
</tr>
</table>
<p>Which fields are the model features (inputs)? What is the label (correct answer)?</p>
<p>The inputs are bounces and time_on_site. The label is will_buy_on_return_visit</p>
<p><strong>Question:</strong> Which two fields are known after a visitor's first session?</p>
<p><strong>Answer: bounces</strong> and <strong>time_on_site</strong> are known after a visitor's first session.</p>
<p><strong>Question:</strong> Which field isn't known until later in the future?</p>
<p><strong>Answer: will_buy_on_return_visit</strong> is not known after the first visit. Again, you're predicting for a subset of users who returned to your website and purchased. Since you don't know the future at prediction time, you cannot say with certainty whether a new visitor come back and purchase. The value of building a ML model is to get the probability of future purchase based on the data gleaned about their first session. </p>
<p><strong>Question:</strong> Looking at the initial data results, do you think <strong>time_on_site</strong> and <strong>bounces</strong> will be a good indicator of whether the user will return and purchase or not?</p>
<p><strong>Answer:</strong> It's often too early to tell before training and evaluating the model, but at first glance out of the top 10 time_on_site only 1 customer returned to buy which isn't very promising. Let's see how well the model does. </p>


  </div>
  
  <div class="lab-step">
    <h2 id="step6">Create a BigQuery dataset to store models</h2>
    
    <p>Next, create a new BigQuery dataset which will also store your ML models.</p>
<ol start="1">
<li>In the left pane, click the down arrow icon ( <img style="max-width: 12.00px;" src="https://cdn.qwiklabs.com/9UuzOIT%2BJz7w1x0Wi15B7gQ7dmbLV9YT1Gz96ZMx3xs%3D"> ) next to your project name, and then click <strong>Create new dataset</strong>.<img style="max-width: 580.00px;" src="https://cdn.qwiklabs.com/MDmAbxVetOLtBi2EAqAxk77zLukzHB4323yrm6%2FRYms%3D">
</li>
<li>In the <strong>Create Dataset</strong> dialog:</li>
</ol>
<ul>
<li>For <strong>Dataset ID</strong>, type <strong>ecommerce</strong>. </li>
<li>Leave the other values at their defaults.</li>
</ul>
<p><img style="max-width: 624.00px;" src="https://cdn.qwiklabs.com/NukGkTEdpgnqWEIl3Sv1dGL%2Bb1ahoRALh2KtAOA8upk%3D"></p>
<ol start="3">
<li>Click <strong>OK</strong>.</li>
</ol>


  </div>
  
  <div class="lab-step">
    <h2 id="step7">Select a BQML model type and specify options</h2>
    
    <p>Now that you have your initial features selected, you are now ready to create your first ML model in BigQuery. </p>
<p>There are the two model types to choose from:</p>
<table>
<tr>
<td colspan="1" rowspan="1">
<p><strong>Model </strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Model Type</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Label Data type</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Example</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Forecasting</p>
</td>
<td colspan="1" rowspan="1">
<p>linear_reg</p>
</td>
<td colspan="1" rowspan="1">
<p>Numeric value (typically an integer or floating point)</p>
</td>
<td colspan="1" rowspan="1">
<p>Forecast sales figures for next year given historical sales data.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Classification</p>
</td>
<td colspan="1" rowspan="1">
<p>logistic_reg</p>
</td>
<td colspan="1" rowspan="1">
<p>0 or 1 for binary classification</p>
</td>
<td colspan="1" rowspan="1">
<p>Classify an email as spam or not spam given the context. </p>
</td>
</tr>
</table>
<p><strong>Note:</strong> There are many additional model types used in Machine Learning (like Neural Networks and decision trees) and available using libraries like <a href="https://www.tensorflow.org/tutorials/" target="_blank">TensorFlow</a>. At time of writing, BQML supports the two listed above. </p>
<p>Which model type should we choose?</p>
<p>Since we are bucketing visitors into "will buy in future" or "wont buy in future" we will use logistic_reg in a classification model. </p>
<p>Enter the following query to create a model and specify model options:</p>
<pre class="prettyprint"><code>#standardSQL&#x000A;&#x000A;CREATE OR REPLACE MODEL `ecommerce.classification_model`&#x000A;OPTIONS&#x000A;(&#x000A;model_type='logistic_reg', &#x000A;labels = ['will_buy_on_return_visit']&#x000A;) &#x000A;AS&#x000A;&#x000A;#standardSQL&#x000A;SELECT&#x000A;  * EXCEPT(fullVisitorId)&#x000A;FROM&#x000A;&#x000A;  # features &#x000A;  (SELECT&#x000A;    fullVisitorId,&#x000A;    IFNULL(totals.bounces, 0) AS bounces,&#x000A;    IFNULL(totals.timeOnSite, 0) AS time_on_site&#x000A;  FROM&#x000A;    `data-to-insights.ecommerce.web_analytics`&#x000A;  WHERE&#x000A;    totals.newVisits = 1&#x000A;    AND date BETWEEN '20160801' AND '20170430') # train on first 9 months&#x000A;  JOIN&#x000A;  (SELECT&#x000A;    fullvisitorid,&#x000A;    IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit&#x000A;  FROM&#x000A;      `data-to-insights.ecommerce.web_analytics`&#x000A;  GROUP BY fullvisitorid)&#x000A;  USING (fullVisitorId)&#x000A;;</code></pre>
<p>Note that we cannot feed all of our available data to the model during training since we need to save some unseen data points for model evaluation and testing. To accomplish this, we simply add a WHERE clause condition to filter and train on only the first 9 months of session data in our 12 month dataset. </p>
<p>Next, click <strong>Run Query</strong> to train your model</p>
<p>Wait for the model to train (5 - 10 minutes).</p>
<p>After your model is trained, you will see the message "This was a CREATE operation. Results will not be shown" which indicates that your model has been successfully trained. </p>
<p>Look inside your project dataset and confirm <strong>classification_model </strong>now appears. </p>
<p>Next, we will evaluate the performance of the model against new unseen evaluation data. </p>


  </div>
  
  <div class="lab-step">
    <h2 id="step8">Evaluate classification model performance</h2>
    
    <h3>Select your performance criteria</h3>
<p>For classification problems in ML, you want to minimize the False Positive Rate (i.e. predict that the user will return and purchase and they don't) and maximize the True Positive Rate (predict that the user will return and purchase and they do). </p>
<p>This relationship is visualized with a ROC curve (Receiver Operating Characteristic) like the one shown here, where you try to maximize the area under the curve or AUC:</p>
<p><img style="max-width: 263.50px;" src="https://cdn.qwiklabs.com/GNW5Bw%2B8bviep9OK201QGPzaAEnKKyoIkDChUHeVdFw%3D"></p>
<p>In BQML, <strong>roc_auc</strong> is simply a queryable field when evaluating your trained ML model. </p>
<p>Now that training is complete, you can evaluate how well the model performs with this query using <code>ML.EVALUATE</code>:</p>
<pre class="prettyprint"><code>#standardSQL&#x000A;SELECT&#x000A;  roc_auc,&#x000A;  CASE &#x000A;    WHEN roc_auc &gt; .9 THEN 'good'&#x000A;    WHEN roc_auc &gt; .8 THEN 'fair'&#x000A;    WHEN roc_auc &gt; .7 THEN 'decent'&#x000A;    WHEN roc_auc &gt; .6 THEN 'not great'&#x000A;  ELSE 'poor' END AS model_quality&#x000A;FROM&#x000A;  ML.EVALUATE(MODEL ecommerce.classification_model,  (&#x000A;&#x000A;SELECT&#x000A;  * EXCEPT(fullVisitorId)&#x000A;FROM&#x000A;&#x000A;  # features &#x000A;  (SELECT&#x000A;    fullVisitorId,&#x000A;    IFNULL(totals.bounces, 0) AS bounces,&#x000A;    IFNULL(totals.timeOnSite, 0) AS time_on_site&#x000A;  FROM&#x000A;    `data-to-insights.ecommerce.web_analytics`&#x000A;  WHERE&#x000A;    totals.newVisits = 1&#x000A;    AND date BETWEEN '20170501' AND '20170630') # eval on 2 months&#x000A;  JOIN&#x000A;  (SELECT&#x000A;    fullvisitorid,&#x000A;    IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit&#x000A;  FROM&#x000A;      `data-to-insights.ecommerce.web_analytics`&#x000A;  GROUP BY fullvisitorid)&#x000A;  USING (fullVisitorId)&#x000A;&#x000A;));</code></pre>
<table>
<tr>
<td colspan="1" rowspan="1">
<p>Row</p>
</td>
<td colspan="1" rowspan="1">
<p>roc_auc</p>
</td>
<td colspan="1" rowspan="1">
<p>model_quality</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
<td colspan="1" rowspan="1">
<p>0.724588</p>
</td>
<td colspan="1" rowspan="1">
<p>decent</p>
</td>
</tr>
</table>
<p>After evaluating our model we get a <strong>roc_auc</strong> of 0.72, which shows the model has decent, but not great, predictive power. Since the goal is to get the area under the curve as close to 1.0 as possible there is room for improvement. </p>


  </div>
  
  <div class="lab-step">
    <h2 id="step9">Improve model performance with Feature Engineering</h2>
    
    <p>As we hinted at earlier, there are many more features in the dataset that may help the model better understand the relationship between a visitor's first session and the likelihood that they will purchase on a subsequent visit.  </p>
<p>Let's add these new features and create your second machine learning model which we will call <strong><code>classification_model_2</code></strong>:</p>
<ul>
<li>How far the visitor got in the checkout process on their first visit</li>
<li>Where the visitor came from (traffic source: organic search, referring site etc..)</li>
<li>Device category (mobile, tablet, desktop)</li>
<li>Geographic information (country)</li>
</ul>
<p>Create this second model by running the below query: </p>
<pre class="prettyprint"><code>#standardSQL&#x000A;CREATE OR REPLACE MODEL `ecommerce.classification_model_2`&#x000A;OPTIONS&#x000A;  (model_type='logistic_reg', labels = ['will_buy_on_return_visit']) AS&#x000A;&#x000A;WITH all_visitor_stats AS (&#x000A;SELECT&#x000A;  fullvisitorid,&#x000A;  IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit &#x000A;  FROM `data-to-insights.ecommerce.web_analytics`&#x000A;  GROUP BY fullvisitorid&#x000A;)&#x000A;&#x000A;# add in new features&#x000A;SELECT * EXCEPT(unique_session_id) FROM (&#x000A;&#x000A;  SELECT&#x000A;      CONCAT(fullvisitorid, CAST(visitId AS STRING)) AS unique_session_id,&#x000A;&#x000A;      # labels&#x000A;      will_buy_on_return_visit,&#x000A;&#x000A;      MAX(CAST(h.eCommerceAction.action_type AS INT64)) AS latest_ecommerce_progress,&#x000A;&#x000A;      # behavior on the site&#x000A;      IFNULL(totals.bounces, 0) AS bounces,&#x000A;      IFNULL(totals.timeOnSite, 0) AS time_on_site,&#x000A;      totals.pageviews,&#x000A;&#x000A;      # where the visitor came from&#x000A;      trafficSource.source,&#x000A;      trafficSource.medium,&#x000A;      channelGrouping,&#x000A;&#x000A;      # mobile or desktop&#x000A;      device.deviceCategory, &#x000A;&#x000A;      # geographic&#x000A;      IFNULL(geoNetwork.country, "") AS country&#x000A;&#x000A;  FROM `data-to-insights.ecommerce.web_analytics`,&#x000A;     UNNEST(hits) AS h&#x000A;&#x000A;    JOIN all_visitor_stats USING(fullvisitorid)&#x000A;&#x000A;  WHERE 1=1&#x000A;    # only predict for new visits&#x000A;    AND totals.newVisits = 1&#x000A;    AND date BETWEEN '20160801' AND '20170430' # train 9 months&#x000A;&#x000A;  GROUP BY&#x000A;  unique_session_id,&#x000A;  will_buy_on_return_visit,&#x000A;  bounces,&#x000A;  time_on_site,&#x000A;  totals.pageviews,&#x000A;  trafficSource.source,&#x000A;  trafficSource.medium,&#x000A;  channelGrouping,&#x000A;  device.deviceCategory,&#x000A;  country&#x000A;);</code></pre>
<p>Note that we are still training on the same first 9 months of data even with this new model. It's important to have the same training dataset so we can be certain a better model output is attributable to better input features and not new or different training data. </p>
<p>A key new feature that has been added is the maximum checkout progress each visitor reached in their session which is recorded in the field <strong>hits.eCommerceAction.action_type</strong>. If you search for that field in the <a href="https://support.google.com/analytics/answer/3437719?hl=en" target="_blank">field definitions</a> you will see the field mapping of 6 = Completed Purchase. </p>
<p>As an aside, the web analytics dataset has nested and repeated fields like <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/arrays" target="_blank">ARRAYS</a> which we need to break apart into separate rows in our dataset. This is accomplished by using the UNNEST() function as you see in the above query.  </p>
<p><strong>Wait for the new model</strong> to finish training (5-10 minutes).</p>
<p>Evaluate this new model to see if there is better predictive power: </p>
<pre class="prettyprint"><code>#standardSQL&#x000A;SELECT&#x000A;  roc_auc,&#x000A;  CASE &#x000A;    WHEN roc_auc &gt; .9 THEN 'good'&#x000A;    WHEN roc_auc &gt; .8 THEN 'fair'&#x000A;    WHEN roc_auc &gt; .7 THEN 'decent'&#x000A;    WHEN roc_auc &gt; .6 THEN 'not great'&#x000A;  ELSE 'poor' END AS model_quality&#x000A;FROM&#x000A;  ML.EVALUATE(MODEL ecommerce.classification_model_2,  (&#x000A;&#x000A;WITH all_visitor_stats AS (&#x000A;SELECT&#x000A;  fullvisitorid,&#x000A;  IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit &#x000A;  FROM `data-to-insights.ecommerce.web_analytics`&#x000A;  GROUP BY fullvisitorid&#x000A;)&#x000A;&#x000A;# add in new features&#x000A;SELECT * EXCEPT(unique_session_id) FROM (&#x000A;&#x000A;  SELECT&#x000A;      CONCAT(fullvisitorid, CAST(visitId AS STRING)) AS unique_session_id,&#x000A;&#x000A;      # labels&#x000A;      will_buy_on_return_visit,&#x000A;&#x000A;      MAX(CAST(h.eCommerceAction.action_type AS INT64)) AS latest_ecommerce_progress,&#x000A;&#x000A;      # behavior on the site&#x000A;      IFNULL(totals.bounces, 0) AS bounces,&#x000A;      IFNULL(totals.timeOnSite, 0) AS time_on_site,&#x000A;      totals.pageviews,&#x000A;&#x000A;      # where the visitor came from&#x000A;      trafficSource.source,&#x000A;      trafficSource.medium,&#x000A;      channelGrouping,&#x000A;&#x000A;      # mobile or desktop&#x000A;      device.deviceCategory, &#x000A;&#x000A;      # geographic&#x000A;      IFNULL(geoNetwork.country, "") AS country&#x000A;&#x000A;  FROM `data-to-insights.ecommerce.web_analytics`,&#x000A;     UNNEST(hits) AS h&#x000A;&#x000A;    JOIN all_visitor_stats USING(fullvisitorid)&#x000A;&#x000A;  WHERE 1=1&#x000A;    # only predict for new visits&#x000A;    AND totals.newVisits = 1&#x000A;    AND date BETWEEN '20170501' AND '20170630' # eval 2 months&#x000A;&#x000A;  GROUP BY&#x000A;  unique_session_id,&#x000A;  will_buy_on_return_visit,&#x000A;  bounces,&#x000A;  time_on_site,&#x000A;  totals.pageviews,&#x000A;  trafficSource.source,&#x000A;  trafficSource.medium,&#x000A;  channelGrouping,&#x000A;  device.deviceCategory,&#x000A;  country&#x000A;)&#x000A;));</code></pre>
<table>
<tr>
<td colspan="1" rowspan="1">
<p>Row</p>
</td>
<td colspan="1" rowspan="1">
<p>roc_auc</p>
</td>
<td colspan="1" rowspan="1">
<p>model_quality</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>1</p>
</td>
<td colspan="1" rowspan="1">
<p>0.910382</p>
</td>
<td colspan="1" rowspan="1">
<p>good</p>
</td>
</tr>
</table>
<p>With the new model you now get a <strong>roc_auc</strong> of 0.91 which is significantly better than the first model. </p>
<p>Now that you have a trained model, time to make some predictions.  </p>


  </div>
  
  <div class="lab-step">
    <h2 id="step10">Predict which new visitors will come back and purchase</h2>
    
    <p>Next you will write a query to predict which new visitors will come back and make a purchase.The prediction query below uses the improved classification model we trained above to predict the probability that a first-time visitor to the Google Merchandise Store will make a purchase in a later visit. The predictions are made on the last 1 month (out of 12 months) of the dataset. </p>
<pre class="prettyprint"><code>#standardSQL&#x000A;SELECT&#x000A;*&#x000A;FROM&#x000A;  ml.PREDICT(MODEL `ecommerce.classification_model_2`,&#x000A;   (&#x000A;&#x000A;WITH all_visitor_stats AS (&#x000A;SELECT&#x000A;  fullvisitorid,&#x000A;  IF(COUNTIF(totals.transactions &gt; 0 AND totals.newVisits IS NULL) &gt; 0, 1, 0) AS will_buy_on_return_visit &#x000A;  FROM `data-to-insights.ecommerce.web_analytics`&#x000A;  GROUP BY fullvisitorid&#x000A;)&#x000A;&#x000A;&#x000A;  SELECT&#x000A;      CONCAT(fullvisitorid, '-',CAST(visitId AS STRING)) AS unique_session_id,&#x000A;&#x000A;      # labels&#x000A;      will_buy_on_return_visit,&#x000A;&#x000A;      MAX(CAST(h.eCommerceAction.action_type AS INT64)) AS latest_ecommerce_progress,&#x000A;&#x000A;      # behavior on the site&#x000A;      IFNULL(totals.bounces, 0) AS bounces,&#x000A;      IFNULL(totals.timeOnSite, 0) AS time_on_site,&#x000A;      totals.pageviews,&#x000A;&#x000A;      # where the visitor came from&#x000A;      trafficSource.source,&#x000A;      trafficSource.medium,&#x000A;      channelGrouping,&#x000A;&#x000A;      # mobile or desktop&#x000A;      device.deviceCategory, &#x000A;&#x000A;      # geographic&#x000A;      IFNULL(geoNetwork.country, "") AS country&#x000A;&#x000A;  FROM `data-to-insights.ecommerce.web_analytics`,&#x000A;     UNNEST(hits) AS h&#x000A;&#x000A;    JOIN all_visitor_stats USING(fullvisitorid)&#x000A;&#x000A;  WHERE&#x000A;    # only predict for new visits&#x000A;    totals.newVisits = 1&#x000A;    AND date BETWEEN '20170701' AND '20170801' # test 1 month&#x000A;&#x000A;  GROUP BY&#x000A;  unique_session_id,&#x000A;  will_buy_on_return_visit,&#x000A;  bounces,&#x000A;  time_on_site,&#x000A;  totals.pageviews,&#x000A;  trafficSource.source,&#x000A;  trafficSource.medium,&#x000A;  channelGrouping,&#x000A;  device.deviceCategory,&#x000A;  country&#x000A;)&#x000A;&#x000A;)&#x000A;&#x000A;&#x000A;ORDER BY&#x000A;  predicted_will_buy_on_return_visit DESC;</code></pre>
<p>Your model will now output the predictions it has for those July 2017 ecommerce sessions. You can see three newly added fields:</p>
<ul>
<li>predicted_will_buy_on_return_visit: whether the model thinks the visitor will buy later (1 = yes)</li>
<li>predicted_will_buy_on_return_visit_probs.label: the binary classifier for yes / no</li>
<li>predicted_will_buy_on_return_visit.prob: the confidence the model has in it's prediction (1 = 100%)</li>
</ul>
<p><img style="max-width: 624.00px;" src="https://cdn.qwiklabs.com/EEmk9rngb9FJ5WDVGHrqB8ZqQqzmxS8dTVn18DodJd4%3D"></p>


  </div>
  
  <div class="lab-step">
    <h2 id="step11">Results</h2>
    
    <ul>
<li>Of the top 6% of first-time visitors (sorted in decreasing order of predicted probability), more than 6% make a purchase in a later visit. </li>
<li>These users represent nearly 50% of all first-time visitors who make a purchase in a later visit. </li>
<li>Overall, only 0.7% of first-time visitors make a purchase in a later visit. </li>
<li>Targeting the top 6% of first-time increases marketing ROI by 9x vs targeting them all!</li>
</ul>


  </div>
  
  <div class="lab-step">
    <h2 id="step12">Additional information</h2>
    
    <p><strong>Tip:</strong> add <code>warm_start = true</code> to your model options if you are retraining new data on an existing model for faster training times. Note that you cannot change the feature columns (this would necessitate a new model).</p>
<p><strong>roc_auc</strong> is just one of the performance metrics available during model evaluation. Also available are <a href="https://en.wikipedia.org/wiki/Precision_and_recall" target="_blank">accuracy, precision, and recall</a>. Knowing which performance metric to rely on is highly dependent on what your overall objective or goal is.</p>


  </div>
  
  <div class="lab-step">
    <h2 id="step13">Other datasets to explore</h2>
    
    <p>You can use this below link to bring in the <strong>bigquery-public-data</strong> project if you want to explore modeling on other datasets like forecasting fares for taxi trips:</p>
<ul>
<li><a href="https://bigquery.cloud.google.com/table/bigquery-public-data:chicago_taxi_trips.taxi_trips" target="_blank">https://bigquery.cloud.google.com/table/bigquery-public-data:chicago_taxi_trips.taxi_trips</a></li>
</ul>


  </div>
  
  <div class="lab-step">
    <h2 id="step14">Congratulations!</h2>
    
    <p>You've successfully built a ML model in BigQuery to classify ecommerce visitors.</p>
<h3>Next Steps / Learn More</h3>
<p>Here are links </p>
<ul>
<li>Already have a Google Analytics account and want to query your own datasets in BigQuery? Follow this <a href="https://support.google.com/analytics/answer/3416092" target="_blank">export guide</a>.</li>
<li>The complete BigQuery SQL reference guide is here as an additional resource: <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax" target="_blank">https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax</a>
</li>
</ul>
<h3>Google Cloud Training &amp; Certification</h3>
<p>...helps you make the most of Google Cloud technologies. <a href="https://cloud.google.com/training/courses" target="_blank">Our classes</a> include technical skills and best practices to help you get up to speed quickly and continue your learning journey. We offer fundamental to advanced level training, with on-demand, live, and virtual options to suit your busy schedule. <a href="https://cloud.google.com/certification/" target="_blank">Certifications</a> help you validate and prove your skill and expertise in Google Cloud technologies.</p>

<h5>Manual Last Updated July 22, 2018</h5>
<h5>Lab Last Tested July 20, 2018</h5>
<p>©2018 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>



  </div>
  

  
</div>

</div>
<div class='js-lab-content-outline lab-content__outline'>
<a href='#step1'>Overview</a><a href='#step2'>Set up your environment</a><a href='#step3'>Explore ecommerce data</a><a href='#step4'>Identify an objective</a><a href='#step5'>Select features and create your training dataset</a><a href='#step6'>Create a BigQuery dataset to store models</a><a href='#step7'>Select a BQML model type and specify options</a><a href='#step8'>Evaluate classification model performance</a><a href='#step9'>Improve model performance with Feature Engineering</a><a href='#step10'>Predict which new visitors will come back and purchase</a><a href='#step11'>Results</a><a href='#step12'>Additional information</a><a href='#step13'>Other datasets to explore</a><a href='#step14'>Congratulations!</a>
</div>
</div>

</div>


</div>
</div>
<div class='lab-introduction js-lab-introduction is-hidden'>
<div class='lab-introduction__inner'>
<h1 class='headline-1'>Welcome to Your First Lab!</h1>
<div class='lab-introduction__video'>
<iframe allow='autoplay; encrypted-media' frameborder='0' id='lab-introduction' src='https://www.youtube.com/embed/yF7EDXKTmoQ?enablejsapi=1&amp;rel=0&amp;showinfo=0'></iframe>
</div>
<a class='button js-skip-button'>Skip</a>
</div>
</div>


</div>
</main>
<div class='bottom-menu'>
<a title="Home" class="side-menu__item js-navigation-button active" aria-current="page" href="/"><div class='side-menu__item__icon'>
<ql-icon>home</ql-icon>
</div>
<div class='side-menu__item__label'>
Home
</div>
</a>
<a title="Catalog" class="side-menu__item js-navigation-button" href="/catalog"><div class='side-menu__item__icon'>
<ql-icon>school</ql-icon>
</div>
<div class='side-menu__item__label'>
Catalog
</div>
</a>
<a title="My Learning" class="side-menu__item js-navigation-button" href="/my_learning"><div class='side-menu__item__icon'>
<ql-icon>event_note</ql-icon>
</div>
<div class='side-menu__item__label'>
My Learning
</div>
</a>
<a class='side-menu__item js-side-menu-button'>
<div class='side-menu__item__icon'>
<i class='material-icons'>menu</i>
</div>
<span class='side-menu__item__tooltip'>More</span>
<div class='side-menu__item__label'>
More
</div>
</a>
</div>

<div class='modal fade' id='support-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<h4 class='modal-header'>How can we help you?</h4>
<form action="/contact_support" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="FJ8hp8BYhDV+CZMYRZsC22w5c2xahbt7bShQRoRG9FZuS/p8uXR9fQUyZoeMI30xTQEte3MhHpWNoJeXqryM7Q==" />
<div class='modal-body'>
<p class='l-mbl'>We will get back to you within 24 hours.</p>
<div class='form-row'>
<div class='control-group'>
<label for="Question">Question</label>
<input type="text" name="question" id="question" placeholder="Briefly describe your question" />
</div>
</div>
<div class='form-row'>
<div class='control-group'>
<label for="Details">Details</label>
<textarea name="description" id="description" rows="5" placeholder="Fill in the details here. Please try to be as specific as possible.&#x000A;">
</textarea>
</div>
</div>
<div class='form-row'>
<div class='control-group'>
<label for="Your_Name">Your name</label>
<input type="text" name="name" id="name" value="Bogdan Gavrylov" />
</div>
<div class='control-group'>
<label for="Your_Email">Your email</label>
<input type="text" name="email" id="email" value="bogdana278@gmail.com" />
</div>
</div>
</div>
<div class='modal-actions'>
<a class='mdl-button mdl-button--cancel mdl-js-button mdl-js-ripple-effect l-mll' data-dismiss='modal'>
Nevermind
</a>
<input type="submit" name="commit" value="Submit" class="mdl-button mdl-button--primary mdl-js-button mdl-js-ripple-effect" data-disable-with="Submit" />
</div>
</form>



</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='modal fade' id='lab-help-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<h4 class='modal-header'>Get Help</h4>
<form action="/contact_support" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="OxZKaIFFsx6cdZtrmdUhqQCsiq7uuOwz+X/eXowTMkVBwpGz+GlKVudObvRQbV5DIZTUucccSd0Z9xmPoulK/g==" />
<div class='modal-body'>
<div class='control-group l-mbl'>
<label for="Question">Question</label>
<input type="text" name="question" id="question" placeholder="Briefly describe your question" />
</div>
<div class='control-group l-mbl'>
<label for="Details">Details</label>
<textarea name="description" id="description" rows="5" placeholder="Fill in the details here. Please try to be as specific as possible.&#x000A;">
</textarea>
</div>
<div class='control-group l-mbl'>
<label for="Your_Name">Your name</label>
<input type="text" name="name" id="name" value="Bogdan Gavrylov" />
</div>
<div class='control-group l-mbl'>
<label for="Your_Email">Your email</label>
<input type="text" name="email" id="email" value="bogdana278@gmail.com" />
</div>
<div class='control-group l-mbl'>
<label for="Severity">Severity</label>
<select name="severity" id="severity"><option value="0">-</option>
<option value="severity_1">Severity 1 (Highest)</option>
<option value="severity_2">Severity 2</option>
<option value="severity_3">Severity 3</option>
<option value="severity_4">Severity 4</option>
<option value="severity_5">Severity 5 (Lowest)</option></select>
</div>
<div class='control-group'>
<div class='control-label'></div>
We will get back to you within 24 hours.
</div>
</div>
<div class='modal-actions'>
<a class='mdl-button mdl-button--primary mdl-js-button mdl-js-ripple-effect' data-dismiss='modal'>
Cancel
</a>
<input type="submit" name="commit" value="Submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary" data-disable-with="Submit" />
</div>
</form>



</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='modal fade' id='lab-details-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<div class='modal-body'>
<p class='l-mbm'>
Predict whether or not a visitor will return to your ecommerce site and purchase. 
</p>
<p class='small-label l-mbs'>
<strong>
Duration:
</strong>
0m setup
&middot;
135m access
&middot;
90m completion
</p>
<p class='small-label l-mbs'>
<span><strong>Levels: </strong>introductory</span>
</p>
<p class='small-label'>
<strong>
Permalink:
</strong>
<a href="https://googlecoursera.qwiklabs.com/catalog_lab/1099">https://googlecoursera.qwiklabs.com/catalog_lab/1099</a>
</p>
</div>
<div class='modal-actions'>
<a class='mdl-button mdl-button--primary mdl-js-button mdl-js-ripple-effect' data-dismiss='modal'>
Got It
</a>
</div>


</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='modal fade' id='lab-review-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<form class="simple_form js-lab-review-form" id="new_lab_review" action="/lab_reviews" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='modal-body'>
<p class='label'>
How satisfied are you with this lab?
</p>
<div class='rateit js-rateit' data-rateit-max='5' data-rateit-min='0' data-rateit-resetable='false' data-rateit-step='1' data-rateit-value='0'></div>
<div class='l-mtm'>

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" type="hidden" value="1340194" name="lab_review[user_id]" id="lab_review_user_id" /></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" type="hidden" value="2096" name="lab_review[classroom_id]" id="lab_review_classroom_id" /></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" type="hidden" value="1099" name="lab_review[lab_id]" id="lab_review_lab_id" /></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" type="hidden" value="17164" name="lab_review[focus_id]" id="lab_review_focus_id" /></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" type="hidden" name="lab_review[rating]" id="lab_review_rating" /></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Comment</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment">
</textarea></div></div>
</div>
</div>
<div class='modal-actions'>
<a class='mdl-button mdl-button--primary mdl-js-button mdl-js-ripple-effect' data-dismiss='modal'>
Cancel
</a>
<input type="submit" name="commit" value="Submit" class="btn mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary" data-disable-with="Submit" />
</div>
</form>

</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>

<script>
  $( function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    initLabContent( );
  ql.labOutline.links.init("17164");
  ql.labOutline.layout.init();
  initLabReviewModal();
  initLabAssessment();
  ql.labIntroduction.init( true );
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?\n","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.\n","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  initLabRun();
  ql.initHeader();
  ql.sideMenu.init();
  ql.navigation.init();
  
  });
</script>
<style>
  .mdl-layout__container {
    position: static
  }
</style>
</body>
</html>
